# Node_Template

## Hello World

Node_Template_Project is an example assignment while applying to development at VFA.

We're applying some keys:

1. MVC architecture.
2. RESTful API
3. GraphQL API
4. E2E testing
5. AWS Intergration
6. Background processing task
7. Multi database
8. Typescript
9. Nodejs with Nestjs Framework

## Checklists

- [x] Building the base project by MVC architecture.
- [x] RESTful API support
- [x] GraphQL API support
- [x] Authorization by API key
- [ ] Authentication by access key
- [x] E2E testing for GraphQL
- [ ] E2E testing for RESTful
- [ ] Logging in file
- [x] Auto check syntax and convention rules
- [x] Implementing automated build, test and deploy to CircleCI, TravisCI,...

## Installation

```bash
$ yarn
```
- Adds the source line to your profile (~/.bash_profile, ~/.zshrc, ~/.profile, or ~/.bashrc). 

 ```bash
  export RDS_ROOT_PASSWORD="admin@123"
  export RDS_DATABASE="db_template"
  export RDS_USERNAME="devUser"
  export RDS_PASSWORD="123456"
 ```

 ```bash
  $ cp .env.example .env
 ```

- Editing file `.env`


## Running the app

```bash
# development
$ yarn run start
# watch mode
$ yarn run start:dev
# production mode
$ yarn run start:prod
```

- GraphQL: Open browser and go to http://localhost:3000/api, you can check your API here.
- RESTful: API url start with http://localhost:3000/api/*

## Structure

1. Project configuration

```
.dockerignore             - docker ignore files
.lintstagerc              - tslint check config
.prettierignore           - prettier ignore files
.prettierrc               - prettier config
DockerFile                - Dockerfile
tsconfig.json             - typescript transpilation rule
tslint.json               - typescript lint rule
```

### Structure of a module GraphQL:

- `app/graphql/modules/*.module.ts` Define name module.
- `app/graphql/modules/*.resolver.ts` Handle process of API.
- `app/graphql/modules/*.graphql` Define schema Graphql.
- `app/graphql/dto/*.ts` Define validation of input.
- `app/graphql/general.graphql` General type of Graphql. For example `type DateTime`, ...
- `app/graphql/graphql.schema.ts` (DO NOT EDIT THIS FILE) This is file will be generated auto when you run command `yarn run generate-typings`. This file will help you more easy when working with typescript.

### Entities:

- **src/app/entities/\*.ts**
  - Declare all ORM. Currently, We use TypeORM to declare. Read more detail at [TypeORM](https://typeorm.io/#/).

## How to code a API

1. Create a file In directory graphql/modules

## Test

```bash
# unit tests
$ yarn run test
# e2e tests
$ yarn run test:e2e
# test coverage
$ yarn run test:cov
```

## Deploy your service

```bash
# Run command:
$ yarn start-docker


# Stop your service:
$ yarn stop-docker
```
